<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Import / Export Rules | Nobita Admin</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&family=Lexend:wght@600;800&family=Roboto+Mono:wght@400;500&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="/import-export.css" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lucide-static@0.306.0/dist/lucide-static.min.css"/>
  <style>
    body { background: linear-gradient(120deg, #eceafd 70%, #e2d4f5 100%); font-family: 'Inter',sans-serif; margin: 0; min-height:100vh; }
    .import-export-container {
      max-width: 420px; margin: 38px auto 0 auto; background: #fff; border-radius: 22px;
      box-shadow: 0 8px 30px #a37be755; padding: 36px 18px 30px 18px; position: relative;
      animation: popin 0.7s cubic-bezier(.18,1.13,.4,1.06);
    }
    .import-export-header {
      font-size: 2.1rem; color: #8227b3; font-weight: 800; letter-spacing: 1.2px;
      margin-bottom: 12px; text-align: center; text-shadow: 0 2px 14px #e3d2ff7c;
    }
    .rule-btn-row { display: flex; gap: 15px; justify-content: center; margin-bottom: 24px; }
    .rule-btn {
      padding: 13px 24px; background: linear-gradient(92deg, #a78bfa 30%, #b583f3 100%);
      color: #fff; border: none; border-radius: 10px; font-weight: 700; font-size: 1.08rem;
      cursor: pointer; box-shadow: 0 2px 14px #b48ffa2e; transition: background 0.13s, transform 0.13s;
      display: flex; align-items: center; gap: 7px;
    }
    .rule-btn:hover { background: linear-gradient(92deg, #a14ffb 10%, #7220d6 100%); transform: scale(1.05);}
    #fileUploadBox, #exportBox { margin-top: 22px; }
    #importTypeBtns { display: flex; gap: 12px; margin-bottom: 14px; }
    #importTypeBtns button {
      padding: 9px 17px; border-radius: 8px; border: none; font-weight: 600; font-size: 1.02rem; cursor: pointer;
      background: #ede5fc; color: #6b30e2; box-shadow: 0 2px 7px #a58ed933; transition: background 0.13s, color 0.13s;
    }
    #importTypeBtns button.selected, #importTypeBtns button:hover {
      background: #8b53e7; color: #fff;
    }
    #ruleExportName {
      width: 100%; padding: 10px 13px; border-radius: 8px; border: 1.2px solid #e2e5fa;
      font-size: 1.08rem; margin-bottom: 10px;
    }
    .back-btn {
      position: absolute; top: 24px; left: 20px; background: rgba(155,105,255,0.13);
      color: #7427bf; border: none; padding: 8px 18px; border-radius: 8px;
      font-weight: 700; font-size: 1.1rem; display: flex; align-items: center; gap: 7px;
      box-shadow: 0 1.5px 9px #cbb0ef35; transition: background .14s, color .14s, transform .12s, box-shadow .14s;
      text-decoration: none; cursor: pointer; z-index: 10;
    }
    .back-btn:hover { background: #e8dfff; color: #502283; box-shadow: 0 2px 12px #cbb0ef55;}
    .back-btn:active { background: #e0ccff; color: #412276; transform: scale(.98);}
    @keyframes popin { from { opacity: 0; transform: translateY(45px) scale(0.98);} to   { opacity: 1; transform: none;} }
    @media (max-width: 600px){
      .import-export-container { max-width:98vw; padding:20px 4px 14px 4px;}
      .import-export-header { font-size:1.37rem;}
      .back-btn { top: 10px; left: 6px; font-size:0.97rem; padding:7px 11px;}
    }
  </style>
</head>
<body>
  <div class="import-export-container">
    <a href="/admin/dashboard" class="back-btn">
      <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
        <polyline points="15 18 9 12 15 6"></polyline>
      </svg>
      Back to Dashboard
    </a>
    <div class="import-export-header">Rule Import / Export</div>
    <div class="rule-btn-row">
      <button class="rule-btn" onclick="showImportOptions()"><i class="lucide lucide-upload"></i> Import</button>
      <button class="rule-btn" onclick="showExportOptions()"><i class="lucide lucide-download"></i> Export</button>
    </div>
    <div id="fileUploadBox" style="display:none;">
      <div id="importTypeBtns">
        <button id="importBtn_add" onclick="setImportType('add')" class="selected">Add</button>
        <button id="importBtn_overwrite" onclick="setImportType('overwrite')">Overwrite</button>
      </div>
      <input type="file" id="ruleFileInput" accept=".json" style="width:100%;margin-bottom:13px;" />
      <button class="rule-btn" style="width:100%;" onclick="handleImportRules()">
        <i class="lucide lucide-upload"></i> Import Rules
      </button>
      <div style="font-size:13px;color:#b86ee3;margin-top:6px;">
        <b>Add:</b> JSON file ke saare rules jod dega <br>
        <b>Overwrite:</b> Pehle ke rules hata ke file ke rules se replace ho jayenge
      </div>
    </div>
    <div id="exportBox" style="display:none;">
      <input type="text" id="ruleExportName" placeholder="Export filename..." />
      <button class="rule-btn" style="width:100%;" onclick="handleExportRules()">
        <i class="lucide lucide-download"></i> Download Rules
      </button>
      <div style="font-size:13px;color:#b86ee3;margin-top:7px;">
        Saare rules JSON file ki tarah download ho jayenge
      </div>
    </div>
  </div>
  <script src="https://cdn.jsdelivr.net/npm/lucide@latest/dist/umd/lucide.js"></script>
  <script>lucide.createIcons();</script>
  <script src="/import-export.js"></script>
</body>
</html>